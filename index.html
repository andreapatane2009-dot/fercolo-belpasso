<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Fercolo di Santa Lucia – Belpasso</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

  <!-- Stile personalizzato -->
  <style>
    #map { height: 500px; border-radius: 12px; }
    @media (max-width: 640px) { #map { height: 300px; } }
  </style>
</head>
<body class="bg-gray-50 font-sans">

<!-- Header con logo -->
<header class="bg-green-700 text-white flex items-center justify-center gap-4 p-4 shadow-lg">
  <img src="https://upload.wikimedia.org/wikipedia/commons/1/1e/Belpasso-Stemma.png" alt="Logo Santa Lucia" class="h-12 w-12">
  <h1 class="text-3xl font-bold">Fercolo di Santa Lucia – Belpasso</h1>
</header>

<!-- Navbar -->
<nav class="bg-red-700 text-white flex justify-center gap-6 p-3 shadow-md">
  <a href="#map" class="hover:bg-red-800 px-4 py-2 rounded-md transition">Segui il Fercolo</a>
  <a href="#storia" class="hover:bg-red-800 px-4 py-2 rounded-md transition">La Storia</a>
  <a href="#chiesa" class="hover:bg-red-800 px-4 py-2 rounded-md transition">La Chiesa</a>
</nav>

<!-- Main content -->
<main class="flex flex-col items-center gap-10 p-6">

  <!-- Mappa -->
  <div id="map" class="shadow-xl w-full max-w-6xl"></div>

  <!-- Sezione Storia -->
  <section id="storia" class="bg-white p-8 rounded-xl shadow-xl max-w-6xl w-full">
    <h2 class="text-2xl font-bold text-red-700 mb-4">La Storia di Santa Lucia</h2>
    <p class="text-gray-700 leading-relaxed">
      Santa Lucia è una delle sante più venerate in Sicilia, protettrice della vista e simbolo di luce e speranza.  
      La sua festa si celebra ogni anno con processioni e riti tradizionali, tra cui il celebre fercolo che attraversa le vie principali di Belpasso.  
      La devozione popolare alla Santa risale a secoli fa e coinvolge l’intera comunità con canti, luminarie e celebrazioni religiose.
    </p>
  </section>

  <!-- Sezione Chiesa -->
  <section id="chiesa" class="bg-white p-8 rounded-xl shadow-xl max-w-6xl w-full">
    <h2 class="text-2xl font-bold text-red-700 mb-4">La Chiesa Madre di Belpasso</h2>
    <p class="text-gray-700 leading-relaxed">
    La chiesa madre di Belpasso è dedicata a Maria Santissima Immacolata ed è situata nella piazza Duomo.

Realizzato nel 1700 su progetto dell'architetto Bellia, è dedicata all'Immacolata, anche se nella tradizione religiosa il culto più vivo è quello di 
      Santa Lucia patrona della città, le cui reliquie e il simulacro sono conservati all'interno di una cappella dedicata alla Martire, chiamata “Cammaredda”,
      dentro una nicchia ricca di damasco rosso e di stucchi dorati. Viene velata dalla porta detta degli angeli e dalla porta in cui troviamo a rilievo formelle 
      con la vita della santa ed il suo martirio. L'edificio religioso presenta la tipica facciata che si ritrova anche nelle altre chiese sei-settecentesche della
      zona, con un prospetto rettangolare diviso in tre campate da un ordine gigante di quattro paraste che sorreggono la trabeazione, il tutto ornato da un tipico 
      campanile barocco, il quale ospita sei campane, tra cui il "Campanone di Santa Lucia" tra le campane più grandi d'Italia. L'interno, realizzato con un impianto
      basilicale a tre navate scandito da archi su possenti pilastri, custodisce buona parte delle opere d'arte della precedente città.
    </p>
  </section>

</main>

<!-- Footer -->
<footer class="bg-green-700 text-white text-center p-4 mt-10 shadow-inner">
  © 2025 Festa di Santa Lucia – Belpasso
</footer>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<!-- Firebase JS -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
  // FIREBASE CONFIG
  const firebaseConfig = {
    apiKey: "AIzaSyBDmEnqJW96XdkwW9ItCZqheKWwfAF24ec",
    authDomain: "fercolo-belpasso.firebaseapp.com",
    databaseURL: "https://fercolo-belpasso-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "fercolo-belpasso",
    storageBucket: "fercolo-belpasso.firebasestorage.app",
    messagingSenderId: "10147586918",
    appId: "1:10147586918:web:0efbe277aa1aeb4be7dea7"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Mappa centrata su Belpasso
  const belpasso = [37.5947, 14.9771];
  const map = L.map('map').setView(belpasso, 15);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '© OpenStreetMap'
  }).addTo(map);

  // Marker fercolo
  const marker = L.marker(belpasso).addTo(map).bindPopup("Fercolo di Santa Lucia").openPopup();

  // Aggiornamento posizione in tempo reale
  db.ref('fercolo/posizione').on('value', snapshot => {
      const data = snapshot.val();
      if(data){
          const latlng = [data.lat, data.lon];
          marker.setLatLng(latlng);
          map.setView(latlng); // commenta se vuoi mappa fissa
      }
  });
</script>

</body>
</html>

